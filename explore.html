<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GAFFA - Explore</title>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        :root { --gold: #d4af37; --bg: #000; --card: #111; }
        body { background-color: var(--bg); color: white; font-family: 'Segoe UI', sans-serif; margin: 0; padding-bottom: 80px; }

        /* شريط البحث الفخم */
        .search-container {
            position: sticky; top: 0; background: rgba(0,0,0,0.9);
            padding: 15px 20px; z-index: 1000; backdrop-filter: blur(10px);
        }
        .search-box {
            background: #1a1a1a; border-radius: 12px; display: flex;
            align-items: center; padding: 10px 15px; border: 1px solid #333;
        }
        .search-box input {
            background: none; border: none; color: white; flex: 1;
            padding: 0 10px; outline: none; font-size: 14px;
        }
        .search-box i { color: var(--gold); }

        /* فئات الاستكشاف السريعة */
        .categories {
            display: flex; gap: 10px; padding: 10px 20px;
            overflow-x: auto; scrollbar-width: none;
        }
        .cat-item {
            background: #111; padding: 8px 18px; border-radius: 20px;
            font-size: 12px; border: 1px solid #222; white-space: nowrap;
            transition: 0.3s; cursor: pointer;
        }
        .cat-item:hover { border-color: var(--gold); color: var(--gold); }

        /* شبكة الاستكشاف الذكية (Mosaic Grid) */
        .explore-grid {
            display: grid; grid-template-columns: repeat(3, 1fr);
            grid-auto-rows: 150px; gap: 2px; padding: 2px;
        }
        .grid-item { position: relative; overflow: hidden; background: #0a0a0a; }
        .grid-item img { width: 100%; height: 100%; object-fit: cover; transition: 0.4s; }
        .grid-item:hover img { transform: scale(1.1); opacity: 0.8; }

        /* جعل بعض الصور أكبر (تأثير إنستغرام) */
        .grid-item.wide { grid-column: span 2; grid-row: span 2; }
        
        /* أيقونة الفيديو (للتدليل على الريلز) */
        .post-type { position: absolute; top: 10px; right: 10px; color: white; text-shadow: 0 0 5px black; }

        /* البار السفلي */
        .nav-bottom { 
            position: fixed; bottom: 0; width: 100%; height: 70px; 
            background: rgba(0,0,0,0.95); display: flex; justify-content: space-around; 
            align-items: center; border-top: 1px solid #111; z-index: 2000;
        }
        .nav-link { color: #555; text-decoration: none; }
        .active { color: var(--gold); }
    </style>
</head>
<body>

    <div class="search-container">
        <div class="search-box">
            <i data-lucide="search"></i>
            <input type="text" placeholder="ابحث عن مبدعين، فراشات، أو ذهب...">
        </div>
    </div>

    <div class="categories">
        <div class="cat-item">الكل</div>
        <div class="cat-item">تصاميم ذهبية</div>
        <div class="cat-item">فراشات</div>
        <div class="cat-item">تكنولوجيا</div>
        <div class="cat-item">فنون سائلة</div>
    </div>

    <div class="explore-grid" id="exploreGrid">
        <div class="grid-item wide"><img src="https://picsum.photos/400/400?random=1"><i data-lucide="play" class="post-type"></i></div>
        <div class="grid-item"><img src="https://picsum.photos/200/200?random=2"></div>
        <div class="grid-item"><img src="https://picsum.photos/200/200?random=3"></div>
        <div class="grid-item"><img src="https://picsum.photos/200/200?random=4"></div>
        <div class="grid-item"><img src="https://picsum.photos/200/200?random=5"></div>
        <div class="grid-item wide"><img src="https://picsum.photos/400/400?random=6"></div>
        <div class="grid-item"><img src="https://picsum.photos/200/200?random=7"></div>
        <div class="grid-item"><img src="https://picsum.photos/200/200?random=8"></div>
        <div class="grid-item"><img src="https://picsum.photos/200/200?random=9"></div>
    </div>

    <div class="nav-bottom">
        <a href="feed.html" class="nav-link"><i data-lucide="home"></i></a>
        <a href="explore.html" class="nav-link active"><i data-lucide="search"></i></a>
        <a href="profile.html" class="nav-link" style="background:var(--gold); padding:8px; border-radius:12px; color:black; margin-top:-10px;">
            <i data-lucide="plus"></i>
        </a>
        <a href="messages.html" class="nav-link"><i data-lucide="message-square"></i></a>
        <a href="profile.html" class="nav-link"><i data-lucide="user"></i></a>
    </div>

    <script>
        lucide.createIcons();

        // دمج المنشورات التي نشرها المستخدم في الـ Explore أيضاً
        function syncExplore() {
            const grid = document.getElementById('exploreGrid');
            const myPosts = JSON.parse(localStorage.getItem('GAFFA_GLOBAL_FEED') || "[]");
            
            myPosts.forEach(p => {
                const div = document.createElement('div');
                div.className = 'grid-item';
                div.innerHTML = `<img src="${p.image}">`;
                grid.prepend(div); // وضع منشورات المستخدم في البداية
            });
        }

        window.onload = syncExplore;
    </script>
</body>
</html>

