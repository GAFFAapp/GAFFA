<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GAFFA - Home Feed</title>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        :root { --gold: #d4af37; --bg: #000; --card: #111; }
        body { background-color: var(--bg); color: white; font-family: 'Segoe UI', sans-serif; margin: 0; padding-bottom: 80px; }

        /* Ø§Ù„Ø±Ø£Ø³ Ø§Ù„Ø¹Ù„ÙˆÙŠ */
        .feed-header { 
            position: sticky; top: 0; background: rgba(0,0,0,0.9); 
            backdrop-filter: blur(10px); padding: 15px 20px; 
            display: flex; justify-content: space-between; align-items: center; 
            z-index: 1000; border-bottom: 1px solid #111;
        }
        .logo { font-size: 22px; font-weight: 900; color: var(--gold); letter-spacing: 1px; }

        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù‚ØµØµ (Stories) */
        .stories-bar { 
            display: flex; gap: 15px; padding: 15px; 
            overflow-x: auto; scrollbar-width: none; border-bottom: 1px solid #111;
        }
        .story-circle { 
            width: 65px; height: 65px; border-radius: 50%; 
            border: 2px solid var(--gold); padding: 2px; flex-shrink: 0;
        }
        .story-circle img { width: 100%; height: 100%; border-radius: 50%; object-fit: cover; }

        /* Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø§Øª (Posts) */
        .post-card { border-bottom: 1px solid #111; margin-bottom: 10px; }
        .post-user { padding: 12px; display: flex; align-items: center; gap: 10px; }
        .user-avatar { width: 35px; height: 35px; border-radius: 50%; border: 1px solid var(--gold); }
        .username { font-size: 14px; font-weight: bold; }

        .post-image { width: 100%; aspect-ratio: 1/1; background: #0a0a0a; overflow: hidden; }
        .post-image img { width: 100%; height: 100%; object-fit: cover; }

        .post-actions { padding: 12px; display: flex; gap: 15px; }
        .action-btn { cursor: pointer; transition: 0.2s; }
        .action-btn:hover { color: var(--gold); }

        .post-content { padding: 0 12px 15px; font-size: 13px; color: #eee; }

        /* Ø§Ù„Ø¨Ø§Ø± Ø§Ù„Ø³ÙÙ„ÙŠ */
        .nav-bottom { 
            position: fixed; bottom: 0; width: 100%; height: 70px; 
            background: rgba(0,0,0,0.95); display: flex; justify-content: space-around; 
            align-items: center; border-top: 1px solid #111; z-index: 2000;
        }
        .nav-link { color: #555; text-decoration: none; }
        .active { color: var(--gold); }
    </style>
</head>
<body>

<div class="feed-header">
    <div class="logo">GAFFA</div>
    <div style="display: flex; gap: 15px;">
        <i data-lucide="heart" class="action-btn"></i>
        <a href="messages.html" style="color: inherit;"><i data-lucide="message-circle" class="action-btn"></i></a>
    </div>
</div>

<div class="stories-bar" id="globalStories">
    </div>

<div id="globalFeed">
    <div class="post-card">
        <div class="post-user">
            <img src="https://via.placeholder.com/50" class="user-avatar">
            <span class="username">GAFFA_TEAM ğŸ’</span>
        </div>
        <div class="post-image">
            <img src="https://via.placeholder.com/500">
        </div>
        <div class="post-actions">
            <i data-lucide="heart" class="action-btn"></i>
            <i data-lucide="message-square" class="action-btn"></i>
            <i data-lucide="send" class="action-btn"></i>
        </div>
        <div class="post-content">
            <b>GAFFA_TEAM</b> Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨ÙƒÙ… ÙÙŠ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø°Ù‡Ø¨ÙŠØ© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© ğŸ¦‹
        </div>
    </div>
</div>

<div class="nav-bottom">
    <a href="feed.html" class="nav-link active"><i data-lucide="home"></i></a>
    <a href="explore.html" class="nav-link"><i data-lucide="search"></i></a>
    <a href="profile.html" class="nav-link" style="background:var(--gold); padding:8px; border-radius:12px; color:black; margin-top:-10px;">
        <i data-lucide="plus"></i>
    </a>
    <a href="messages.html" class="nav-link"><i data-lucide="message-square"></i></a>
    <a href="profile.html" class="nav-link"><i data-lucide="user"></i></a>
</div>

<script>
    lucide.createIcons();

    function loadFeed() {
        const feedContainer = document.getElementById('globalFeed');
        const storiesContainer = document.getElementById('globalStories');

        // 1. ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚ØµØµ (ØªØ®ØªÙÙŠ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ ÙƒÙ…Ø§ Ø¨Ø±Ù…Ø¬Ù†Ø§)
        let stories = JSON.parse(localStorage.getItem('GAFFA_STORIES') || "[]");
        const now = Date.now();
        stories = stories.filter(s => s.expiresAt > now);
        
        stories.forEach(s => {
            const div = document.createElement('div');
            div.className = 'story-circle';
            div.innerHTML = `<img src="${s.image}">`;
            storiesContainer.appendChild(div);
        });

        // 2. ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø§Øª Ø§Ù„ØªÙŠ Ù†Ø´Ø±ØªÙ‡Ø§ Ù…Ù† Ø§Ù„Ø¨Ø±ÙˆÙØ§ÙŠÙ„
        let posts = JSON.parse(localStorage.getItem('GAFFA_GLOBAL_FEED') || "[]");
        
        posts.forEach(p => {
            const postHTML = `
                <div class="post-card">
                    <div class="post-user">
                        <img src="https://via.placeholder.com/50" class="user-avatar">
                        <span class="username">${p.user}</span>
                    </div>
                    <div class="post-image">
                        <img src="${p.image}">
                    </div>
                    <div class="post-actions">
                        <i data-lucide="heart" class="action-btn"></i>
                        <i data-lucide="message-square" class="action-btn"></i>
                        <i data-lucide="send" class="action-btn"></i>
                    </div>
                    <div class="post-content">
                        <b>${p.user}</b> Ù…Ù†Ø´ÙˆØ± Ø¬Ø¯ÙŠØ¯ Ø¹Ø¨Ø± Ø¹Ø§Ù„Ù… GAFFA ğŸ¦‹
                    </div>
                </div>
            `;
            feedContainer.insertAdjacentHTML('afterbegin', postHTML);
        });
        lucide.createIcons();
    }

    window.onload = loadFeed;
</script>
</body>
</html>

